<?xml version="1.0" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title></title>
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<link rev="made" href="mailto:root@localhost" />
</head>

<body>



<ul id="index">
  <li>
    <ul>
      <li><a href="#new---constructor-for-HTML_Tree">new() - constructor for HTML_Tree</a></li>
      <li><a href="#tree_menu-list-name-attr">tree_menu($list, $name, $attr)</a></li>
      <li><a href="#render_tree-list-parentness">render_tree($list, $parentness)</a></li>
      <li><a href="#render_branch-menu_name-level_value-menu_list-recursion_level">render_branch($menu_name, $level_value, $menu_list, $recursion_level)</a></li>
      <li><a href="#count_levels-parentness_h">count_levels($parentness_h)</a></li>
      <li><a href="#step_to_level-level-r_level">step_to_level($level, $r_level)</a></li>
      <li><a href="#build_parentness_tree-array-attr---build-hash_ref-that-represents-ieararchy-for-list-Parents-and-children">build_parentness_tree($array, $attr) - build hash_ref that represents ieararchy for list (Parents and children);</a></li>
      <li><a href="#build_next_level-id-level-parents">build_next_level($id, $level, $parents)</a></li>
    </ul>
  </li>
</ul>

<h2 id="new---constructor-for-HTML_Tree">new() - constructor for HTML_Tree</h2>

<pre><code>  Attributes:

  Returns:
    object - new Tree instance</code></pre>

<h2 id="tree_menu-list-name-attr">tree_menu($list, $name, $attr)</h2>

<pre><code>  Builds a collapsible tree menu from hashref that contains array_refs as values

  Arguments:
    $list - array_ref of hash_ref (list from DB with a COLS_NAME attr)
    $name - Name for First level of menu
    $attr
      PARENT_KEY      - hash_key for an item&#39;s  parent id. Default to PARENT_ID
      ID_KEY          - hash_key for an item&#39;s id key. Default to &#39;ID&#39;

      LABEL_KEY        - hash_key for an item&#39;s label key. Default to &#39;NAME&#39;
      VALUE_KEY       - hash_key for an item&#39;s value key. Default to &#39;ID&#39;
      ROOT_VALUE      - Value of root (highest ieararchy level parent). Default is &#39;&#39;;

      PARENTNESS_HASH - if  you need more complicated structure pass your own ierarchy for building menu
      LEVEL_ID_KEYS    - arr_ref of ID_KEY  for a level
      LEVEL_LABEL_KEYS - arr_ref of LABEL_KEY  for a level
      LEVEL_VALUE_KEYS - arr_ref of VALUE_KEY for a level

      LEVELS   - number of levels to display. Default is to count it automatically
      CHECKBOX - boolean, will build a checkbox at last level
      NAME     - string, name for a checkbox

      COL_SIZE - width of menu. Default is 3 if LEVELS &lt;= 6, and 6 otherwise

  Returns:
    HTML code for a menu

  Example:

   my $list = [

    { ID =&gt; &#39;1&#39;,  NAME =&gt; &#39;Level1_1&#39;, VALUE =&gt; &#39;1&#39; , PRENT_ID =&gt; &#39;0&#39;},
    { ID =&gt; &#39;2&#39;,  NAME =&gt; &#39;Level1_2&#39;, VALUE =&gt; &#39;2&#39; , PRENT_ID =&gt; &#39;0&#39;},
    { ID =&gt; &#39;3&#39;,  NAME =&gt; &#39;Level1_3&#39;, VALUE =&gt; &#39;3&#39; , PRENT_ID =&gt; &#39;0&#39;},
    { ID =&gt; &#39;4&#39;,  NAME =&gt; &#39;Level1_4&#39;, VALUE =&gt; &#39;4&#39; , PRENT_ID =&gt; &#39;0&#39;},

    { ID =&gt; &#39;5&#39;,  NAME =&gt; &#39;Level2_1&#39;, VALUE =&gt; &#39;5&#39; , PRENT_ID =&gt; &#39;1&#39;},
    { ID =&gt; &#39;6&#39;,  NAME =&gt; &#39;Level2_2&#39;, VALUE =&gt; &#39;6&#39; , PRENT_ID =&gt; &#39;2&#39;},
    { ID =&gt; &#39;7&#39;,  NAME =&gt; &#39;Level2_3&#39;, VALUE =&gt; &#39;7&#39; , PRENT_ID =&gt; &#39;3&#39;},
    { ID =&gt; &#39;8&#39;,  NAME =&gt; &#39;Level2_4&#39;, VALUE =&gt; &#39;8&#39; , PRENT_ID =&gt; &#39;4&#39;},

    { ID =&gt; &#39;10&#39;, NAME =&gt; &#39;Level3_1&#39;, VALUE =&gt; &#39;10&#39; , PRENT_ID =&gt; &#39;8&#39;},
    { ID =&gt; &#39;11&#39;, NAME =&gt; &#39;Level3_2&#39;, VALUE =&gt; &#39;11&#39; , PRENT_ID =&gt; &#39;8&#39;},
    { ID =&gt; &#39;12&#39;, NAME =&gt; &#39;Level3_3&#39;, VALUE =&gt; &#39;12&#39; , PRENT_ID =&gt; &#39;8&#39;},
    { ID =&gt; &#39;13&#39;, NAME =&gt; &#39;Level3_4&#39;, VALUE =&gt; &#39;13&#39; , PRENT_ID =&gt; &#39;8&#39;}

  ];

  print $html-&gt;tree_menu( $list, &#39;Menu&#39;, { PARENT_KEY =&gt; &#39;PRENT_ID&#39;, LABEL_KEY =&gt; &#39;NAME&#39; } );</code></pre>

<h2 id="render_tree-list-parentness">render_tree($list, $parentness)</h2>

<pre><code>  Build HTML for a given tree and list

  Arguments:
    $list         -
    $parentness   -

  Returns:</code></pre>

<h2 id="render_branch-menu_name-level_value-menu_list-recursion_level">render_branch($menu_name, $level_value, $menu_list, $recursion_level)</h2>

<pre><code>  Arguments:
    $menu_name        -
    $level_value      -
    $menu_list        -
    $recursion_level  -

  Returns:</code></pre>

<h2 id="count_levels-parentness_h">count_levels($parentness_h)</h2>

<pre><code>  find tree depth

  Arguments:
    $parentness_h - hash_ref

  Returns:
    number - maximal depth of a tree</code></pre>

<h2 id="step_to_level-level-r_level">step_to_level($level, $r_level)</h2>

<pre><code>  Arguments:
    $level,
    $r_level
    $levels_count_ref

  Returns:</code></pre>

<h2 id="build_parentness_tree-array-attr---build-hash_ref-that-represents-ieararchy-for-list-Parents-and-children">build_parentness_tree($array, $attr) - build hash_ref that represents ieararchy for list (Parents and children);</h2>

<pre><code>  Arguments:
    $array - DB list (array of hash_ref). To build parentness we need only PARENT_ID and ID, so you can pass oly this part
    $attr
      PARENT_KEY - hash_key for an item&#39;s  parent id. Default to P
      ID_KEY     - hash_key for an item&#39;s id key. Default to &#39;ID&#39;
      ROOT_VALUE - Value of root (highest ieararchy level parent). Default is &#39;&#39;;

  Returns:
    hash_ref that represents parentness

  Example:
    If given this:
      my $list = [
        { ID =&gt; 1, PARENT_ID = &#39;0&#39;,  ... },
        { ID =&gt; 2, PARENT_ID = 1,   ... },
        { ID =&gt; 3, PARENT_ID = 2,   ... },
        { ID =&gt; 4, PARENT_ID = 2,   ... },
      ]

    Will return this:
      $result =
      {
      &#39;1&#39; =&gt;
        {
          &#39;2&#39; =&gt;
          {
            &#39;3&#39; =&gt; &#39;&#39;,
            &#39;4&#39; =&gt; &#39;&#39;
          }
        }
      };</code></pre>

<h2 id="build_next_level-id-level-parents">build_next_level($id, $level, $parents)</h2>

<pre><code>  Arguments:
    $id    -
    $level -
    $parents -

  Returns:</code></pre>


</body>

</html>


